# Phase 5 설계 문서: Prefrontal Cortex (전전두엽)

> **Genesis Brain Project - Phase 5: Executive Function**
>
> 날짜: 2025-01-31
> 상태: **설계 중**

---

## 1. 목표

전전두엽(PFC)을 구현하여 **실행 기능(Executive Function)**을 추가한다.

### 1.1 생물학적 역할

전전두엽은 뇌의 "CEO"로서:
- **계획(Planning)**: 미래 행동 계획
- **의사결정(Decision Making)**: 여러 옵션 중 선택
- **작업 기억(Working Memory)**: 단기적 정보 유지
- **억제 제어(Inhibitory Control)**: 충동 억제
- **목표 지향 행동(Goal-directed Behavior)**: 보상 기반 행동 선택

### 1.2 Phase 5 목표

```
╔═══════════════════════════════════════════════════════════════╗
║  Phase 5 목표 (Prefrontal Cortex)                             ║
╠═══════════════════════════════════════════════════════════════╣
║  1. 작업 기억(Working Memory) 구현                            ║
║     - 최근 경험 (음식 위치, 위험 위치) 단기 유지              ║
║                                                               ║
║  2. 목표 표상(Goal Representation)                            ║
║     - 현재 목표 (음식 탐색 vs 위험 회피) 명시적 표상          ║
║                                                               ║
║  3. 억제 제어(Inhibitory Control)                             ║
║     - 기저핵/변연계 충동적 반응 억제                          ║
║     - 더 나은 선택을 위해 "기다림"                            ║
║                                                               ║
║  4. 목표 지향 행동(Goal-directed Behavior)                    ║
║     - 습관(기저핵)과 목표지향(PFC) 경쟁/협력                  ║
╚═══════════════════════════════════════════════════════════════╝
```

---

## 2. 아키텍처

### 2.1 PFC 하위 영역

```
┌─────────────────────────────────────────────────────────────┐
│                  Prefrontal Cortex (PFC)                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────┐                 │
│  │  dlPFC          │    │  vmPFC          │                 │
│  │  (dorsolateral) │    │  (ventromedial) │                 │
│  │  작업 기억      │    │  가치 평가      │                 │
│  │  계획           │    │  감정 조절      │                 │
│  └────────┬────────┘    └────────┬────────┘                 │
│           │                      │                          │
│           └──────────┬───────────┘                          │
│                      ▼                                      │
│           ┌─────────────────┐                               │
│           │  ACC            │                               │
│           │  (anterior      │                               │
│           │  cingulate)     │                               │
│           │  충돌 감지      │                               │
│           │  오류 모니터링  │                               │
│           └────────┬────────┘                               │
│                    │                                        │
│                    ▼                                        │
│           ┌─────────────────┐                               │
│           │  OFC            │                               │
│           │  (orbitofrontal)│                               │
│           │  보상 기대      │                               │
│           │  의사결정       │                               │
│           └─────────────────┘                               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 단순화된 Phase 5a 구조

Phase 5의 첫 단계로 핵심 기능만 구현:

```
┌─────────────────────────────────────────────────────────────┐
│                 Phase 5a 구현 (단순화)                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │              Working Memory (작업 기억)              │    │
│  │                  (200 뉴런)                          │    │
│  │   - 지속 활성화 (Persistent Activity)                │    │
│  │   - 최근 음식/위험 위치 유지                         │    │
│  └─────────────────────────┬───────────────────────────┘    │
│                            │                                │
│                            ▼                                │
│  ┌─────────────────────────────────────────────────────┐    │
│  │               Goal Unit (목표 단위)                  │    │
│  │                  (100 뉴런)                          │    │
│  │   - Goal_Food (50): 음식 탐색 목표                   │    │
│  │   - Goal_Safety (50): 안전 추구 목표                 │    │
│  │   - WTA 경쟁                                         │    │
│  └─────────────────────────┬───────────────────────────┘    │
│                            │                                │
│                            ▼                                │
│  ┌─────────────────────────────────────────────────────┐    │
│  │           Inhibitory Control (억제 제어)             │    │
│  │                  (100 뉴런)                          │    │
│  │   - 기저핵 Direct Pathway 억제                       │    │
│  │   - 충동적 행동 억제                                 │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  총 뉴런: 400개                                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.3 연결 구조

```
입력:
  Hippocampus (Place Cells) ──────────┐
  Hippocampus (Food Memory) ─────────┤
  Amygdala (Fear) ───────────────────┼──► Working Memory
  Hypothalamus (Hunger/Satiety) ─────┤
  Basal Ganglia (Dopamine) ──────────┘

내부:
  Working Memory ──────────────► Goal Unit
  Goal Unit ───────────────────► Inhibitory Control

출력:
  Goal Unit ───────────────────► Motor (방향 편향)
  Inhibitory Control ──────────► Basal Ganglia Direct (억제)
  Inhibitory Control ──────────► Amygdala (감정 조절)
```

---

## 3. 메커니즘

### 3.1 작업 기억 (Working Memory)

**지속 활성화 (Persistent Activity)**:
- 재귀 흥분 연결 (Recurrent Excitation)으로 활성화 유지
- 외부 입력 없이도 일정 시간 활성 상태 유지
- 시냅스 우울증 (Synaptic Depression)으로 자연 감쇠

```python
# 재귀 흥분 연결
Working Memory → Working Memory (재귀)
  - 가중치: +5.0 (자기 활성화 유지)
  - 시냅스 우울증: τ_d = 5초 (점진적 감쇠)

# 외부 입력
Hippocampus → Working Memory
  - Place Cells: 현재 위치 정보
  - Food Memory: 음식 위치 기억
```

### 3.2 목표 단위 (Goal Unit)

**WTA 경쟁**:
- Goal_Food vs Goal_Safety 경쟁
- 승자가 현재 행동 목표 결정

```python
# 목표 활성화
Hunger → Goal_Food (+)
Low_Energy → Goal_Food (+)
Fear → Goal_Safety (+)
Working Memory (위험) → Goal_Safety (+)

# WTA
Goal_Food ←→ Goal_Safety (상호 억제)
```

### 3.3 억제 제어 (Inhibitory Control)

**충동 억제**:
- Goal_Safety 활성화 시 Direct Pathway 억제
- "기다림" 행동 유도

```python
# 억제 출력
Goal_Safety → Inhibitory Control (+)
Inhibitory Control → Basal Ganglia Direct (-)
Inhibitory Control → Amygdala Fear (조절)
```

---

## 4. 구현 계획

### 4.1 Phase 5a: 기본 구조 (이번 세션)

1. **뉴런 집단 추가**
   - Working Memory (200)
   - Goal_Food (50)
   - Goal_Safety (50)
   - Inhibitory Control (100)

2. **시냅스 연결**
   - 입력 연결 (Hippocampus, Amygdala, Hypothalamus → PFC)
   - 내부 연결 (Working Memory → Goal, 재귀 연결)
   - 출력 연결 (Goal → Motor, Inhibitory → Basal Ganglia)

3. **시각화**
   - Brain Panel에 PFC 섹션 추가

### 4.2 Phase 5b: 학습 (다음 단계)

- Hebbian 학습으로 Working Memory 연결 강화
- 보상 기반 목표 선택 학습

### 4.3 Phase 5c: 계획 (향후)

- 미래 보상 예측
- 다단계 계획 (현재 → 목표)

---

## 5. 예상 효과

### 5.1 행동 변화

| 상황 | Phase 4 (기저핵) | Phase 5 (PFC 추가) |
|------|------------------|---------------------|
| 배고픔 + 위험 근처 | 충동적 음식 추구 | 위험 피하고 우회 |
| 음식 발견 후 | 바로 떠남 | 위치 기억, 재방문 |
| 위험 회피 후 | 무작위 이동 | 목표 지향 이동 |

### 5.2 성능 기대

```
╔═══════════════════════════════════════════════════════════════╗
║  Phase 5 성능 기대치                                          ║
╠═══════════════════════════════════════════════════════════════╣
║  생존율:       40% → 50-60% (목표 지향 행동으로 개선)         ║
║  Starve:       60% → 40-50% (효율적 음식 탐색)                ║
║  Pain Avoid:   유지 또는 개선 (억제 제어로 충동 억제)         ║
╚═══════════════════════════════════════════════════════════════╝
```

---

## 6. 뉴런 구성 요약

```
Phase 5 추가 뉴런: 400개

┌─────────────────────────────────────────────────────────────┐
│  Prefrontal Cortex (PFC) - 400 뉴런                         │
├─────────────────────────────────────────────────────────────┤
│  Working Memory:        200 뉴런                            │
│    - 재귀 흥분 연결 (지속 활성화)                           │
│    - 시냅스 우울증 (자연 감쇠)                              │
│                                                             │
│  Goal Unit:             100 뉴런                            │
│    - Goal_Food:         50 뉴런                             │
│    - Goal_Safety:       50 뉴런                             │
│    - WTA 경쟁                                               │
│                                                             │
│  Inhibitory Control:    100 뉴런                            │
│    - 기저핵/변연계 억제                                     │
│    - 충동 억제                                              │
└─────────────────────────────────────────────────────────────┘

전체 뉴런 수: 6,700 (Phase 4) + 400 (Phase 5) = 7,100 뉴런
```

---

## 7. 참고 문헌 (생물학적 근거)

1. **Miller & Cohen (2001)**: PFC의 통합적 인지 제어 이론
2. **Fuster (2001)**: 전전두엽과 시간 조직화
3. **Arnsten (2009)**: PFC의 작업 기억 신경 회로
4. **Koechlin et al. (2003)**: 전전두엽의 계층적 인지 제어

---

*Phase 5 설계 문서*
*2025-01-31*
